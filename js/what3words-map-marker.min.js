function MyLocationControl(a,b){var c=document.createElement("div");c.style.cursor="pointer",c.style.backgroundColor="#fff",c.style.margin="0 10px 0 0",c.style.borderRadius="3px",c.style.width="30px",c.style.height="30px",c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",c.title="My location",a.appendChild(c),c.addEventListener("click",function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),b.setCenter(initialLocation)})})}function initMap(a){if(null!=a)var b=a;else var c=[["شاي كرك",24.711989,46.671947,"1.png"],["فطاير ام علي",24.711989,43.671516,"2.png"],["جلسة هاشم",24.711453,41.671947,"R.png"]],b=[24.711989,46.671947];var d=new google.maps.Map(document.getElementById("map"),{center:new google.maps.LatLng(b[0],b[1]),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,mapTypeControl:!1,disableDoubleClickZoom:!0,scaleControl:!0,streetViewControl:!0,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}]});(new google.maps.TrafficLayer).setMap(d),setMarkers(d,c);var f=document.createElement("div");new MyLocationControl(f,d);f.index=1,d.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(f);var h=document.getElementById("pac-input"),i=new google.maps.places.SearchBox(h);d.addListener("bounds_changed",function(){i.setBounds(d.getBounds())});var j=new google.maps.Marker({position:new google.maps.LatLng(b[0],b[1]),draggable:!0,icon:"map-marker-icon_move.png"}),k=[];i.addListener("places_changed",function(){var a=i.getPlaces();if(0!=a.length){k.forEach(function(a){a.setMap(null)}),k=[];var b=new google.maps.LatLngBounds;place=a[0],place.geometry.viewport?b.union(place.geometry.viewport):b.extend(place.geometry.location),d.fitBounds(b),j.setPosition(place.geometry.location),what3WordsConvert(place.geometry.location.lat().toFixed(3),place.geometry.location.lng().toFixed(3))}}),null!=a?setCurrentPosition(d,j,a):setCurrentPosition(d,j),google.maps.event.addListener(j,"dragend",function(a){what3WordsConvert(a.latLng.lat().toFixed(3),a.latLng.lng().toFixed(3))}),google.maps.event.addListener(j,"dragstart",function(a){document.getElementById("current").innerHTML="<p>...جاري التحديد</p>"}),google.maps.event.addListener(d,"dblclick",function(a){var b=new google.maps.Marker({position:a.latLng,icon:"map-marker-icon-new.png",map:d}),e=document.getElementById("myModal"),f=document.getElementsByClassName("close")[0];google.maps.event.addListener(b,"rightclick",function(g){g.latLng.lat(),g.latLng.lng();e.style.display="block",f.onclick=function(){e.style.display="none"},window.onclick=function(a){a.target==e&&(e.style.display="none")},document.getElementById("buttonize").onclick=function(){0===document.getElementById("newMarkerInput").value.length&&(document.getElementById("newMarkerInput").value="موقع بلا اسم"),c.push([document.getElementById("newMarkerInput").value,a.latLng.lat(),a.latLng.lng(),"4.jpg"]),setMarkers(d,c),e.style.display="none"},document.getElementById("buttonize-cancel").onclick=function(){b=[].setMap(null),e.style.display="none"}})});var l=!1;google.maps.event.addListener(d,"click",function(a){l?(j.setPosition(a.latLng),what3WordsConvert(a.latLng.lat().toFixed(3),a.latLng.lng().toFixed(3))):console.log("Short Press")}),google.maps.event.addListener(d,"mousedown",function(a){start=(new Date).getTime()}),google.maps.event.addListener(d,"mouseup",function(a){end=(new Date).getTime(),l=!(end-start<500)}),d.setCenter(j.position),j.setMap(d);var m=document.getElementById("marker-me");m.style.backgroundColor="white",m.addEventListener("click",function(){"white"===m.style.backgroundColor?(j.setMap(null),document.getElementById("current").style.visibility="hidden",m.style.backgroundColor="#E11F26"):(j.setMap(d),document.getElementById("current").style.visibility="visible",m.style.backgroundColor="white")})}function setMarkers(a,b){var c,d;for(d=0;d<b.length;d++){var e=b[d][0],f=b[d][1],g=b[d][2],h=b[d][3];latlngset=new google.maps.LatLng(f,g);var c=new google.maps.Marker({map:a,title:e,position:latlngset,icon:"map-marker-icon.png"});a.setCenter(c.getPosition()),changetowords(e,f,g,h,c)}}function changetowords(a,b,c,d,e){what3words.positionToWords([b,c],function(b){var c=a+"</br>"+b.join(".")+'</br><br><img class="img-info" src="images/'+d+'"/>';google.maps.event.addListener(e,"click",function(a,b){return function(){var a=document.getElementById("myModal-info"),c=document.getElementsByClassName("close-info")[0];a.style.display="block",document.getElementById("current").style.visibility="hidden",c.onclick=function(){a.style.display="none",document.getElementById("current").style.visibility="visible"},window.onclick=function(b){b.target==a&&(a.style.display="none",document.getElementById("current").style.visibility="visible")},document.getElementById("info-p").innerHTML=b}}(0,c))})}function placeMarker(a){new google.maps.Marker({position:a,icon:"map-marker-icon.png",map:map})}var map,what3WordsConvert=function(a,b){what3words.positionToWords([a,b],function(a){document.getElementById("current").innerHTML="<p>"+a.join(".")+"</p>",document.getElementById("pac-input").value=a.join(".")})},convertwords=function(a){what3words.wordsToPosition([a],function(a){document.getElementById("test").innerHTML=a,initMap(a)})},setCurrentPosition=function(a,b,c,d){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){c?(initialLocation=new google.maps.LatLng(c[0],c[1]),what3WordsConvert(c[0],c[1])):initialLocation=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),a.setCenter(initialLocation),b.setPosition(initialLocation),d&&what3WordsConvert(e.coords.latitude.toFixed(3),e.coords.longitude.toFixed(3))})};